(()=>{"use strict";function e(){const e=jQuery(".filtry__container"),t=new URLSearchParams(window.location.search),o={};return e.each(((e,t)=>{(t.classList.contains("filtry--checkbox")||t.classList.contains("filtry--radio"))&&jQuery(t).find("input:checked").each(((e,t)=>{const n=t.dataset.taxonomy,r=t.value;n in o?o[n].push(r):o[n]=[r]}))})),t.has("paged")&&(o.paged=parseInt(t.get("paged"))),t.has("orderby")&&(o.orderby=t.get("orderby")),o}function t(e){const t=new URLSearchParams;for(const o of Object.keys(e)){const n=Array.isArray(e[o])?e[o].join(","):e[o];t.set(o,n)}return t.toString()}function o(){return window.filtrySettings}function n(e=!0){e?document.body.classList.add("filtry--loader-active"):document.body.classList.remove("filtry--loader-active")}function r(e,t={}){0===e.length?window.history.pushState(t,"",window.location.href.split("?")[0]):window.history.pushState(t,"",`${window.location.href.split("?")[0]}?${e}`)}function i(e,t=null){const i=o(),c=jQuery("ul.products");0!==c.length?(n(!0),r(e),jQuery.ajax({url:`${i.rest_url}?${e}`,method:"GET",headers:{"X-WP-Nonce":i.rest_nonce},success:function(e){jQuery(".filtry").replaceWith(e.filters),c.html(e.products),jQuery(".woocommerce-result-count").replaceWith(e.result_count),jQuery(".woocommerce-pagination").replaceWith(e.pagination),n(!1),"function"==typeof t&&t(e)},error:function(){n(!1)}})):console.error("Filtry: Could not find store products container")}function c(o){o.preventDefault();const n=o.target.href,r=n.match(/\/page\/(\d+)/);let c=null;if(r)c=parseInt(r[1]);else if(n.split("?").length>1){const e=n.split("?")[1],t=new URLSearchParams(e);t.has("paged")?c=parseInt(t.get("paged")):t.has("page")&&(c=parseInt(t.get("page")))}if(Number.isNaN(c))return void console.error("Filtry: Could not determine page number");const a=e();a.paged=c,i(t(a))}function a(){const i=e();i.paged?i.paged=parseInt(i.paged)+1:i.paged=2,function(e){const t=o(),i=jQuery("ul.products");0!==i.length?(n(!0),r(e),jQuery.ajax({url:`${t.rest_url}?${e}`,method:"GET",headers:{"X-WP-Nonce":t.rest_nonce},success:function(e){jQuery(".filtry").replaceWith(e.filters),i.append(e.products),jQuery(".woocommerce-result-count").replaceWith(e.result_count),n(!1),e.current_page>=e.max_page&&jQuery(".filtry-lazy-load").remove()},error:function(){n(!1)}})):console.error("Filtry: Could not find store products container")}(t(i))}function s(){if(!o().autosubmit)return;const n=e();"paged"in n&&delete n.paged;const r=t(n);!0===o().ajax?i(r):window.location.href=`${window.location.href.split("?")[0]}?${r}`}function l(){const e=window.location.href.split("?")[0];window.location.href=e}function u(){jQuery(this).closest(".filtry--collapsable").toggleClass("filtry--hidden").find(".filtry__list").slideToggle()}document.addEventListener("DOMContentLoaded",(()=>{jQuery(document.body).on("change",".filtry-toggleable input",s),jQuery(document.body).on("click",".filtry-reset",l),jQuery(document.body).on("click",".filtry-submit",s),jQuery(document.body).on("click",".filtry--collapsable .filtry__head",u),!0===o().ajax&&jQuery(document.body).on("click",".woocommerce-pagination a",c),!0===o().ajax&&!0===o().infinity_load&&jQuery(document.body).on("click",".filtry-load-more",a)}))})();
(()=>{"use strict";function e(){const e=jQuery(".filtry__container"),t=new URLSearchParams(window.location.search),o={};return e.each(((e,t)=>{(t.classList.contains("filtry--checkbox")||t.classList.contains("filtry--radio"))&&jQuery(t).find("input:checked").each(((e,t)=>{const n=t.dataset.taxonomy,r=t.value;n in o?o[n].push(r):o[n]=[r]}))})),t.has("paged")&&(o.paged=parseInt(t.get("paged"))),t.has("orderby")&&(o.orderby=t.get("orderby")),o}function t(e){const t=new URLSearchParams;for(const o of Object.keys(e)){const n=Array.isArray(e[o])?e[o].join(","):e[o];t.set(o,n)}return t.toString()}function o(){return window.filtrySettings}function n(e=!0){e?document.body.classList.add("filtry--loader-active"):document.body.classList.remove("filtry--loader-active")}function r(e){const t=o(),r=jQuery("ul.products");0!==r.length?(n(!0),function(e,t={}){0===e.length?window.history.pushState(t,"",window.location.href.split("?")[0]):window.history.pushState(t,"",`${window.location.href.split("?")[0]}?${e}`)}(e),jQuery.ajax({url:`${t.rest_url}?${e}`,method:"GET",headers:{"X-WP-Nonce":t.rest_nonce},success:function(e){jQuery(".filtry").replaceWith(e.filters),r.html(e.products),jQuery(".woocommerce-result-count").replaceWith(e.result_count),jQuery(".woocommerce-pagination").replaceWith(e.pagination),n(!1)},error:function(){n(!1)}})):console.error("Filtry: Could not find store products container")}function i(o){o.preventDefault();const n=o.target.href,i=n.match(/\/page\/(\d+)/);let a=null;if(i)a=parseInt(i[1]);else if(n.split("?").length>1){const e=n.split("?")[1],t=new URLSearchParams(e);t.has("paged")?a=parseInt(t.get("paged")):t.has("page")&&(a=parseInt(t.get("page")))}if(Number.isNaN(a))return void console.error("Filtry: Could not determine page number");const c=e();c.paged=a,r(t(c))}function a(){const o=e();o.paged?o.paged=parseInt(o.paged)+1:o.paged=2;const n=t(o);handleInfinityLoad(n)}function c(){if(!o().autosubmit)return;const n=e();"paged"in n&&delete n.paged;const i=t(n);!0===o().ajax?r(i):window.location.href=`${window.location.href.split("?")[0]}?${i}`}function s(){const e=window.location.href.split("?")[0];window.location.href=e}function l(){jQuery(this).closest(".filtry--collapsable").toggleClass("filtry--hidden").find(".filtry__list").slideToggle()}document.addEventListener("DOMContentLoaded",(()=>{jQuery(document.body).on("change",".filtry-toggleable input",c),jQuery(document.body).on("click",".filtry-reset",s),jQuery(document.body).on("click",".filtry-submit",c),jQuery(document.body).on("click",".filtry--collapsable .filtry__head",l),!0===o().ajax&&jQuery(document.body).on("click",".woocommerce-pagination a",i),!0===o().ajax&&!0===o().infinity_load&&jQuery(document.body).on("click",".filtry-load-more",a)}))})();